"use client";

import { useState } from "react";
import { notFound } from "next/navigation";
import { productsData } from "@/../public/data/AllData";
import Footer from "@/components/Shared/Footer/Footer";
import CartModal from "@/components/Shared/Modal/CartModal";

export default function ProductDetailsPage({
  params,
}: {
  params: { id: string };
}) {
  const [theme, setTheme] = useState<"light" | "dark">("light");
  const product = productsData.find((p) => p.id === Number(params.id));

  if (!product) return notFound();

  return (
    <div className="mae-page" data-theme={theme}>
      {/* Theme Toggle */}
      <button
        className="theme-toggle"
        onClick={() => setTheme(theme === "light" ? "dark" : "light")}
      >
        <svg
          stroke="currentColor"
          fill="currentColor"
          strokeWidth="0"
          viewBox="0 0 256 256"
          height="1.2em"
          width="1.2em"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path d="M120,40V16a8,8,0,0,1,16,0V40a8,8,0,0,1-16,0Zm8,24a64,64,0,1,0,64,64A64.07,64.07,0,0,0,128,64ZM58.34,69.66A8,8,0,0,0,69.66,58.34l-16-16A8,8,0,0,0,42.34,53.66Zm0,116.68-16,16a8,8,0,0,0,11.32,11.32l16-16a8,8,0,0,0-11.32-11.32ZM192,72a8,8,0,0,0,5.66-2.34l16-16a8,8,0,0,0-11.32-11.32l-16,16A8,8,0,0,0,192,72Zm5.66,114.34a8,8,0,0,0-11.32,11.32l16,16a8,8,0,0,0,11.32-11.32ZM48,128a8,8,0,0,0-8-8H16a8,8,0,0,0,0,16H40A8,8,0,0,0,48,128Zm80,80a8,8,0,0,0-8,8v24a8,8,0,0,0,16,0V216A8,8,0,0,0,128,208Zm112-88H216a8,8,0,0,0,0,16h24a8,8,0,0,0,0-16Z"></path>
        </svg>
      </button>

      <main>
        <h1>Motion AutoEncoder</h1>
        <p>
          This project trains a motion autoencoder on the HumanML3D dataset and
          provides tools for evaluation and visualization.
        </p>

        <h2>Reproduce</h2>
        <pre>
          <code>
{`# Create env
conda env create -f environment.yml
conda activate momask
python MotionAE.py   # trains and saves autoencoder_humanml3d.pth
python aevalidate.py # prints MSE / MAE / L2 and optionally writes metrics.json
python visualize.py  # generates plots into assets/

# Serve this page
# Option A: GitHub Pages (static)
# 1) Put this index.html and assets/ in a repo
# 2) Settings → Pages → Deploy from main → /(root)

# Option B: Vercel/Netlify
# vercel deploy`}
          </code>
        </pre>

        <h2>Pretrained Weights</h2>
        <p>
          <a
            href="https://drive.google.com/file/d/1dYFW_9yYElH_7etZhHoHO2bsn7DB_cQI/view?usp=sharing"
            target="_blank"
            rel="noopener noreferrer"
          >
            Download from Google Drive
          </a>
        </p>
      </main>

      <Footer />
      <CartModal />

      {/* -------- Page Styles -------- */}
      <style jsx global>{`
        .mae-page {
          font-family: system-ui, sans-serif;
          padding: 2rem;
          max-width: 900px;
          margin: auto;
          transition: background 0.3s, color 0.3s;
        }
        [data-theme="light"] {
          background: #ffffff;
          color: #000000;
        }
        [data-theme="dark"] {
          background: #121212;
          color: #f0f0f0;
        }
        pre {
          background: var(--code-bg);
          color: var(--code-color);
          padding: 1rem;
          border-radius: 8px;
          overflow-x: auto;
          font-size: 0.9rem;
        }
        [data-theme="light"] {
          --code-bg: #f5f5f5;
          --code-color: #1a1a1a;
        }
        [data-theme="dark"] {
          --code-bg: #1e1e1e;
          --code-color: #eaeaea;
        }
        .theme-toggle {
          position: fixed;
          top: 1rem;
          right: 1rem;
          background: none;
          border: none;
          cursor: pointer;
          font-size: 1.5rem;
        }
        a {
          color: #4da3ff;
        }
      `}</style>
    </div>
  );
}
